<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="831px" preserveAspectRatio="none" style="width:357px;height:831px;background:#FFFFFF;" version="1.1" viewBox="0 0 357 831" width="357px" zoomAndPan="magnify"><defs><filter height="300%" id="fdapuippx2wjr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="181" x="87" y="30.6279">Android View 绘制流程</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="0" x="180" y="55.2109"/><polygon fill="#FFFF88" filter="url(#fdapuippx2wjr)" points="20,59.166,110,59.166,117,84.2861,335,84.2861,335,465.8408,20,465.8408,20,59.166" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="20" x2="117" y1="84.2861" y2="84.2861"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="24" y="77.21">ViewRootImpl</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="129" x="125.25" y="98.2861"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109" x="135.25" y="122.0381">performTraversals()</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="100" x="139.75" y="169.6748"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="149.75" y="193.4268">performDraw()</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="55" x="162.25" y="241.0635"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="172.25" y="264.8154">draw()</text><polygon fill="#FEFECE" filter="url(#fdapuippx2wjr)" points="156.75,312.4521,222.75,312.4521,234.75,324.4521,222.75,336.4521,156.75,336.4521,144.75,324.4521,156.75,312.4521" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="156.75" y="329.5466">支持硬件加速</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="126.75" y="322.0352">yes</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="152" x="40" y="346.4521"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="50" y="370.2041">ThreadedRenderer 实现</text><ellipse cx="116" cy="428.8408" fill="#FFFFFF" filter="url(#fdapuippx2wjr)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="116" cy="428.8408" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="103" x="212" y="346.4521"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="222" y="370.2041">drawSoftware()</text><polygon fill="#FFFF55" filter="url(#fdapuippx2wjr)" points="110.25,475.8408,145.25,475.8408,152.25,500.9609,269.25,500.9609,269.25,714.127,110.25,714.127,110.25,475.8408" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="110.25" x2="152.25" y1="500.9609" y2="500.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="114.25" y="493.8848">View</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="139" x="120.25" y="514.9609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="130.25" y="538.7129">draw(Canvas canvas)</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="113" x="133.25" y="586.3496"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93" x="143.25" y="610.1016">drawBackground</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="63" x="158.25" y="657.7383"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="43" x="168.25" y="681.4902">onDraw</text><polygon fill="#FFFF88" filter="url(#fdapuippx2wjr)" points="131.75,724.127,206.75,724.127,213.75,749.2471,247.75,749.2471,247.75,819.6357,131.75,819.6357,131.75,724.127" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="131.75" x2="213.75" y1="749.2471" y2="749.2471"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="135.75" y="742.1709">ViewGroup</text><rect fill="#FEFECE" filter="url(#fdapuippx2wjr)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="96" x="141.75" y="763.2471"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="151.75" y="786.999">dispatchDraw</text><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="134.6748" y2="169.6748"/><polygon fill="#A80036" points="185.75,159.6748,189.75,169.6748,193.75,159.6748,189.75,163.6748" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="206.0635" y2="241.0635"/><polygon fill="#A80036" points="185.75,231.0635,189.75,241.0635,193.75,231.0635,189.75,235.0635" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="116" x2="116" y1="382.8408" y2="417.8408"/><polygon fill="#A80036" points="112,407.8408,116,417.8408,120,407.8408,116,411.8408" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="144.75" x2="116" y1="324.4521" y2="324.4521"/><line style="stroke:#A80036;stroke-width:1.5;" x1="116" x2="116" y1="324.4521" y2="346.4521"/><polygon fill="#A80036" points="112,336.4521,116,346.4521,120,336.4521,116,340.4521" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="234.75" x2="263.5" y1="324.4521" y2="324.4521"/><line style="stroke:#A80036;stroke-width:1.5;" x1="263.5" x2="263.5" y1="324.4521" y2="346.4521"/><polygon fill="#A80036" points="259.5,336.4521,263.5,346.4521,267.5,336.4521,263.5,340.4521" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="263.5" x2="263.5" y1="382.8408" y2="445.8408"/><line style="stroke:#A80036;stroke-width:1.5;" x1="263.5" x2="189.75" y1="445.8408" y2="445.8408"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="445.8408" y2="514.9609"/><polygon fill="#A80036" points="185.75,504.9609,189.75,514.9609,193.75,504.9609,189.75,508.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="277.4521" y2="312.4521"/><polygon fill="#A80036" points="185.75,302.4521,189.75,312.4521,193.75,302.4521,189.75,306.4521" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="551.3496" y2="586.3496"/><polygon fill="#A80036" points="185.75,576.3496,189.75,586.3496,193.75,576.3496,189.75,580.3496" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="622.7383" y2="657.7383"/><polygon fill="#A80036" points="185.75,647.7383,189.75,657.7383,193.75,647.7383,189.75,651.7383" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="189.75" x2="189.75" y1="694.127" y2="763.2471"/><polygon fill="#A80036" points="185.75,753.2471,189.75,763.2471,193.75,753.2471,189.75,757.2471" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1df017d5d89212db96147d79358358e8]
@startuml

title
Android View 绘制流程

end title

package ViewRootImpl #ff8 {
:performTraversals();
:performDraw();
:draw();
if (支持硬件加速) then (yes)
    :ThreadedRenderer 实现;
    stop
else 
    :drawSoftware();
endif
}

package View #ff5 {
:draw(Canvas canvas);
:drawBackground;
:onDraw;

}

package ViewGroup #ff8 {
:dispatchDraw;
}


@enduml

PlantUML version 1.2021.7(Sun May 23 20:40:07 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>
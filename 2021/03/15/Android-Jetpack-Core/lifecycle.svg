<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="717px" preserveAspectRatio="none" style="width:2389px;height:717px;background:#FFFFFF;" version="1.1" viewBox="0 0 2389 717" width="2389.5px" zoomAndPan="magnify"><defs><filter height="300%" id="f114hn5a33t9lv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[872c1e38de0e0b81d2b44d0a4342b82a]
class Lifecycle--><rect codeLine="3" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="134.2617" id="Lifecycle" style="stroke:#A80036;stroke-width:2.25;" width="444" x="804.75" y="41.25"/><ellipse cx="984.375" cy="65.25" fill="#A9DCDF" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M987,67.5 L982.0547,67.5 L981.3984,69 L981.3984,69 L982.1016,69 L982.875,69.9375 L982.875,70.5 L982.875,71.0625 L982.1016,72 L981.3984,72 L978.5625,72 L977.6484,72 L976.875,71.0625 L976.875,70.5 L976.875,69.9375 L977.6484,69 L978.5625,69 L982.0313,60 L980.7188,60 L979.1484,60 L978.375,59.0625 L978.375,58.5 L978.375,57.9375 L979.1484,57 L980.7188,57 L986.2266,57 L990.2578,69 L991.1016,69 L991.1016,69 L991.875,69.9375 L991.875,70.5 L991.875,71.0625 L991.1016,72 L990.2578,72 L987.4219,72 L986.6484,72 L985.875,71.0625 L985.875,70.5 L985.875,69.9375 L986.6484,69 L987.4219,69 L987.4219,69 L987,67.5 Z M986.1797,64.5 L984.375,59.1328 L982.8281,64.5 L986.1797,64.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="72" x="1015.125" y="72.6152">Lifecycle</text><line style="stroke:#A80036;stroke-width:2.25;" x1="806.25" x2="1247.25" y1="89.25" y2="89.25"/><line style="stroke:#A80036;stroke-width:2.25;" x1="806.25" x2="1247.25" y1="101.25" y2="101.25"/><ellipse cx="821.25" cy="117.75" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="378" x="834.75" y="124.3784">abstract addObserver(LifecycleObserver observer)</text><ellipse cx="821.25" cy="138.5039" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="405" x="834.75" y="145.1323">abstract removeObserver(LifecycleObserver observer)</text><ellipse cx="821.25" cy="159.2578" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="237" x="834.75" y="165.8862">abstract getCurrentState(): State</text><!--MD5=[ac13618b1a974308c1f12eb6c57723dc]
class Event--><rect codeLine="9" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="217.2773" id="Event" style="stroke:#A80036;stroke-width:2.25;" width="127.5" x="963" y="297"/><ellipse cx="1001.025" cy="321" fill="#EB937F" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M998.775,322.5 L998.775,325.5 L1004.775,325.5 L1004.775,324 L1004.775,323.2734 L1005.7125,322.5 L1006.275,322.5 L1006.8375,322.5 L1007.775,323.2734 L1007.775,324 L1007.775,328.5 L995.775,328.5 L995.0484,328.5 L994.275,327.5625 L994.275,327 L994.275,326.4375 L995.0484,325.5 L995.775,325.5 L995.775,325.5 L995.775,316.5 L995.775,316.5 L995.0484,316.5 L994.275,315.5625 L994.275,315 L994.275,314.4375 L995.0484,313.5 L995.775,313.5 L1007.775,313.5 L1007.775,318 L1007.775,318.7266 L1006.8375,319.5 L1006.275,319.5 L1005.7125,319.5 L1004.775,318.7266 L1004.775,318 L1004.775,316.5 L998.775,316.5 L998.775,319.5 L1000.275,319.5 L1000.275,318.7734 L1000.275,318.7734 L1001.2125,318 L1001.775,318 L1002.3375,318 L1003.275,318.7734 L1003.275,319.5 L1003.275,322.5 L1003.275,323.2266 L1002.3375,324 L1002.3375,324 L1001.775,324 L1001.2125,324 L1000.275,323.2266 L1000.275,323.2266 L1000.275,322.5 L998.775,322.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="45" x="1025.475" y="328.3652">Event</text><line style="stroke:#A80036;stroke-width:2.25;" x1="964.5" x2="1089" y1="345" y2="345"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="96" x="972" y="368.1284">ON_CREATE,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="87" x="972" y="388.8823">ON_START,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="97.5" x="972" y="409.6362">ON_RESUME,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="87" x="972" y="430.3901">ON_PAUSE,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="76.5" x="972" y="451.144">ON_STOP,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="109.5" x="972" y="471.8979">ON_DESTROY,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="70.5" x="972" y="492.6519">ON_ANY;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="964.5" x2="1089" y1="502.2773" y2="502.2773"/><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><rect codeLine="18" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="175.7695" id="State" style="stroke:#A80036;stroke-width:2.25;" width="115.5" x="1143" y="318"/><ellipse cx="1176.975" cy="342" fill="#EB937F" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1174.725,343.5 L1174.725,346.5 L1180.725,346.5 L1180.725,345 L1180.725,344.2734 L1181.6625,343.5 L1182.225,343.5 L1182.7875,343.5 L1183.725,344.2734 L1183.725,345 L1183.725,349.5 L1171.725,349.5 L1170.9984,349.5 L1170.225,348.5625 L1170.225,348 L1170.225,347.4375 L1170.9984,346.5 L1171.725,346.5 L1171.725,346.5 L1171.725,337.5 L1171.725,337.5 L1170.9984,337.5 L1170.225,336.5625 L1170.225,336 L1170.225,335.4375 L1170.9984,334.5 L1171.725,334.5 L1183.725,334.5 L1183.725,339 L1183.725,339.7266 L1182.7875,340.5 L1182.225,340.5 L1181.6625,340.5 L1180.725,339.7266 L1180.725,339 L1180.725,337.5 L1174.725,337.5 L1174.725,340.5 L1176.225,340.5 L1176.225,339.7734 L1176.225,339.7734 L1177.1625,339 L1177.725,339 L1178.2875,339 L1179.225,339.7734 L1179.225,340.5 L1179.225,343.5 L1179.225,344.2266 L1178.2875,345 L1178.2875,345 L1177.725,345 L1177.1625,345 L1176.225,344.2266 L1176.225,344.2266 L1176.225,343.5 L1174.725,343.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="42" x="1200.525" y="349.3652">State</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1144.5" x2="1257" y1="366" y2="366"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="97.5" x="1152" y="389.1284">DESTROYED,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="87" x="1152" y="409.8823">INITIALIZED,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="75" x="1152" y="430.6362">CREATED,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="75" x="1152" y="451.3901">STARTED,</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="76.5" x="1152" y="472.144">RESUMED;</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1144.5" x2="1257" y1="481.7695" y2="481.7695"/><!--MD5=[93d009aade0d7b3cbb759335db326b59]
class LifecycleOwner--><rect codeLine="29" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="92.7539" id="LifecycleOwner" style="stroke:#A80036;stroke-width:2.25;" width="193.5" x="558" y="62.25"/><ellipse cx="589.95" cy="86.25" fill="#B4A7E5" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M591.45,81.75 L591.45,90.75 L594.45,90.75 L595.1766,90.75 L595.95,91.6875 L595.95,92.25 L595.95,92.8125 L595.1766,93.75 L594.45,93.75 L585.45,93.75 L584.7234,93.75 L583.95,92.8125 L583.95,92.25 L583.95,91.6875 L584.7234,90.75 L585.45,90.75 L588.45,90.75 L588.45,81.75 L585.45,81.75 L584.7234,81.75 L583.95,80.8125 L583.95,80.25 L583.95,79.6875 L584.7234,78.75 L585.45,78.75 L594.45,78.75 L595.1766,78.75 L595.95,79.6875 L595.95,80.25 L595.95,80.8125 L595.1766,81.75 L594.45,81.75 L591.45,81.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="124.5" x="613.05" y="93.6152">LifecycleOwner</text><line style="stroke:#A80036;stroke-width:2.25;" x1="559.5" x2="750" y1="110.25" y2="110.25"/><line style="stroke:#A80036;stroke-width:2.25;" x1="559.5" x2="750" y1="122.25" y2="122.25"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="175.5" x="567" y="145.3784">getLifecycle(): Lifecycle</text><path d="M9,64.5 L9,153.082 A0,0 0 0 0 9,153.082 L505.5,153.082 A0,0 0 0 0 505.5,153.082 L505.5,114.75 L557.5095,108.75 L505.5,102.75 L505.5,79.5 L490.5,64.5 L9,64.5 A0,0 0 0 0 9,64.5 " fill="#FBFB77" filter="url(#f114hn5a33t9lv)" style="stroke:#A80036;stroke-width:1.5;"/><path d="M490.5,64.5 L490.5,79.5 L505.5,79.5 L490.5,64.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="378" x="18" y="92.2427">我们的 Activity/Fragment 都实现了该接口，</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="429" x="18" y="116.77">用以声明它是一个能够提供生命周期事件的宿主。</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="465" x="18" y="141.2974">同时必须复写getLifecycle()方法提供一个Lifecycle对象</text><!--MD5=[9be8b7e3f68687b31c9f6f3b3b8ed17f]
class LifecycleRegistry--><rect codeLine="34" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="113.5078" id="LifecycleRegistry" style="stroke:#A80036;stroke-width:2.25;" width="276" x="633.75" y="348.75"/><ellipse cx="696.75" cy="372.75" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M699.75,367.5 Q700.0547,366.75 700.4063,366.375 Q700.7578,366 701.1563,366 Q701.8594,366 702.3047,366.4219 Q702.75,366.8438 702.75,367.8281 L702.75,370.1719 Q702.75,371.1563 702.3281,371.5781 Q701.9063,372 701.25,372 Q700.6641,372 700.2891,371.7422 Q699.9141,371.4844 699.75,370.8047 Q699.6797,370.3359 699.4219,370.0781 Q698.9531,369.5859 698.1094,369.3047 Q697.2656,369 696.4219,369 Q695.3672,369 694.4766,369.4219 Q693.6094,369.8438 692.9297,370.7813 Q692.25,371.7188 692.25,373.0078 L692.25,374.3906 Q692.25,375.9375 693.5156,376.9688 Q694.7813,378 697.0313,378 Q698.3672,378 699.3047,377.6953 Q699.8438,377.5313 700.4531,376.9922 Q700.8516,376.6875 701.0625,376.5938 Q701.2734,376.5 701.5313,376.5 Q702.0234,376.5 702.375,376.8984 Q702.75,377.2734 702.75,377.8125 Q702.75,378.3281 702.2344,378.9375 Q701.4844,379.8281 700.2891,380.3203 Q698.7188,381 696.7969,381 Q694.5469,381 692.7422,380.1094 Q691.2891,379.4063 690.2578,377.8828 Q689.25,376.3594 689.25,374.5547 L689.25,372.9141 Q689.25,371.0391 690.1406,369.3984 Q691.0547,367.7578 692.625,366.8906 Q694.2188,366 696,366 Q697.0781,366 698.0156,366.375 Q698.9531,366.75 699.75,367.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="138" x="726.75" y="380.1152">LifecycleRegistry</text><line style="stroke:#A80036;stroke-width:2.25;" x1="635.25" x2="908.25" y1="396.75" y2="396.75"/><line style="stroke:#A80036;stroke-width:2.25;" x1="635.25" x2="908.25" y1="408.75" y2="408.75"/><ellipse cx="650.25" cy="425.25" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="237" x="663.75" y="431.8784">markState(@NonNull State state)</text><rect fill="#F24D5C" height="9" style="stroke:#C82930;stroke-width:1.5;" width="9" x="645.75" y="441.5039"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="180" x="663.75" y="452.6323">moveToState(State next)</text><path d="M291,361.5 L291,450.082 A0,0 0 0 0 291,450.082 L580.5,450.082 A0,0 0 0 0 580.5,450.082 L580.5,411.75 L633.7455,405.75 L580.5,399.75 L580.5,376.5 L565.5,361.5 L291,361.5 A0,0 0 0 0 291,361.5 " fill="#FBFB77" filter="url(#f114hn5a33t9lv)" style="stroke:#A80036;stroke-width:1.5;"/><path d="M565.5,361.5 L565.5,376.5 L580.5,376.5 L565.5,361.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="219" x="300" y="389.2427">Lifecycle 的唯一实现类，</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="258" x="300" y="413.77">主要用来负责注册 Observer，</text><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="253.5" x="300" y="438.2974">以及分发宿主状态事件给它们</text><!--MD5=[e544b34b5f66279db150e7d10fe38a33]
class ObserverWithState--><rect codeLine="40" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="92.7539" id="ObserverWithState" style="stroke:#A80036;stroke-width:2.25;" width="417" x="563.25" y="604.5"/><ellipse cx="688.875" cy="628.5" fill="#ADD1B2" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M691.875,623.25 Q692.1797,622.5 692.5313,622.125 Q692.8828,621.75 693.2813,621.75 Q693.9844,621.75 694.4297,622.1719 Q694.875,622.5938 694.875,623.5781 L694.875,625.9219 Q694.875,626.9063 694.4531,627.3281 Q694.0313,627.75 693.375,627.75 Q692.7891,627.75 692.4141,627.4922 Q692.0391,627.2344 691.875,626.5547 Q691.8047,626.0859 691.5469,625.8281 Q691.0781,625.3359 690.2344,625.0547 Q689.3906,624.75 688.5469,624.75 Q687.4922,624.75 686.6016,625.1719 Q685.7344,625.5938 685.0547,626.5313 Q684.375,627.4688 684.375,628.7578 L684.375,630.1406 Q684.375,631.6875 685.6406,632.7188 Q686.9063,633.75 689.1563,633.75 Q690.4922,633.75 691.4297,633.4453 Q691.9688,633.2813 692.5781,632.7422 Q692.9766,632.4375 693.1875,632.3438 Q693.3984,632.25 693.6563,632.25 Q694.1484,632.25 694.5,632.6484 Q694.875,633.0234 694.875,633.5625 Q694.875,634.0781 694.3594,634.6875 Q693.6094,635.5781 692.4141,636.0703 Q690.8438,636.75 688.9219,636.75 Q686.6719,636.75 684.8672,635.8594 Q683.4141,635.1563 682.3828,633.6328 Q681.375,632.1094 681.375,630.3047 L681.375,628.6641 Q681.375,626.7891 682.2656,625.1484 Q683.1797,623.5078 684.75,622.6406 Q686.3438,621.75 688.125,621.75 Q689.2031,621.75 690.1406,622.125 Q691.0781,622.5 691.875,623.25 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="153" x="719.625" y="635.8652">ObserverWithState</text><line style="stroke:#A80036;stroke-width:2.25;" x1="564.75" x2="978.75" y1="652.5" y2="652.5"/><line style="stroke:#A80036;stroke-width:2.25;" x1="564.75" x2="978.75" y1="664.5" y2="664.5"/><polygon fill="#4177AF" points="579.75,675,573.75,684,585.75,684" style="stroke:#1963A0;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="378" x="593.25" y="687.6284">dispatchEvent(LifecycleOwner owner, Event event)</text><!--MD5=[8460060edf49a53314f0423b75744a6d]
class LifecycleObserver--><rect codeLine="48" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="72" id="LifecycleObserver" style="stroke:#A80036;stroke-width:2.25;" width="196.5" x="1467" y="72.75"/><ellipse cx="1489.5" cy="96.75" fill="#B4A7E5" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1491,92.25 L1491,101.25 L1494,101.25 L1494.7266,101.25 L1495.5,102.1875 L1495.5,102.75 L1495.5,103.3125 L1494.7266,104.25 L1494,104.25 L1485,104.25 L1484.2734,104.25 L1483.5,103.3125 L1483.5,102.75 L1483.5,102.1875 L1484.2734,101.25 L1485,101.25 L1488,101.25 L1488,92.25 L1485,92.25 L1484.2734,92.25 L1483.5,91.3125 L1483.5,90.75 L1483.5,90.1875 L1484.2734,89.25 L1485,89.25 L1494,89.25 L1494.7266,89.25 L1495.5,90.1875 L1495.5,90.75 L1495.5,91.3125 L1494.7266,92.25 L1494,92.25 L1491,92.25 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="148.5" x="1510.5" y="104.1152">LifecycleObserver</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1468.5" x2="1662" y1="120.75" y2="120.75"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1468.5" x2="1662" y1="132.75" y2="132.75"/><!--MD5=[a87333b2bdc85499edf9af61afb5354b]
class FullLifecycleObserver--><rect codeLine="50" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="196.5234" id="FullLifecycleObserver" style="stroke:#A80036;stroke-width:2.25;" width="297" x="1716.75" y="10.5"/><ellipse cx="1770.975" cy="34.5" fill="#B4A7E5" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1772.475,30 L1772.475,39 L1775.475,39 L1776.2016,39 L1776.975,39.9375 L1776.975,40.5 L1776.975,41.0625 L1776.2016,42 L1775.475,42 L1766.475,42 L1765.7484,42 L1764.975,41.0625 L1764.975,40.5 L1764.975,39.9375 L1765.7484,39 L1766.475,39 L1769.475,39 L1769.475,30 L1766.475,30 L1765.7484,30 L1764.975,29.0625 L1764.975,28.5 L1764.975,27.9375 L1765.7484,27 L1766.475,27 L1775.475,27 L1776.2016,27 L1776.975,27.9375 L1776.975,28.5 L1776.975,29.0625 L1776.2016,30 L1775.475,30 L1772.475,30 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="178.5" x="1799.025" y="41.8652">FullLifecycleObserver</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1718.25" x2="2012.25" y1="58.5" y2="58.5"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1718.25" x2="2012.25" y1="70.5" y2="70.5"/><ellipse cx="1733.25" cy="87" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="247.5" x="1746.75" y="93.6284">onCreate(LifecycleOwner owner)</text><ellipse cx="1733.25" cy="107.7539" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="234" x="1746.75" y="114.3823">onStart(LifecycleOwner owner)</text><ellipse cx="1733.25" cy="128.5078" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="258" x="1746.75" y="135.1362">onResume(LifecycleOwner owner)</text><ellipse cx="1733.25" cy="149.2617" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="244.5" x="1746.75" y="155.8901">onPause(LifecycleOwner owner)</text><ellipse cx="1733.25" cy="170.0156" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="232.5" x="1746.75" y="176.644">onStop(LifecycleOwner owner)</text><ellipse cx="1733.25" cy="190.7695" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="256.5" x="1746.75" y="197.3979">onDestroy(LifecycleOwner owner)</text><!--MD5=[89afc0567273cac9434fca59086c97fd]
class DefaultLifecycleObserver--><rect codeLine="59" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="92.7539" id="DefaultLifecycleObserver" style="stroke:#A80036;stroke-width:2.25;" width="303" x="2066.25" y="62.25"/><ellipse cx="2110.35" cy="86.25" fill="#B4A7E5" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M2111.85,81.75 L2111.85,90.75 L2114.85,90.75 L2115.5766,90.75 L2116.35,91.6875 L2116.35,92.25 L2116.35,92.8125 L2115.5766,93.75 L2114.85,93.75 L2105.85,93.75 L2105.1234,93.75 L2104.35,92.8125 L2104.35,92.25 L2104.35,91.6875 L2105.1234,90.75 L2105.85,90.75 L2108.85,90.75 L2108.85,81.75 L2105.85,81.75 L2105.1234,81.75 L2104.35,80.8125 L2104.35,80.25 L2104.35,79.6875 L2105.1234,78.75 L2105.85,78.75 L2114.85,78.75 L2115.5766,78.75 L2116.35,79.6875 L2116.35,80.25 L2116.35,80.8125 L2115.5766,81.75 L2114.85,81.75 L2111.85,81.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="207" x="2136.15" y="93.6152">DefaultLifecycleObserver</text><line style="stroke:#A80036;stroke-width:2.25;" x1="2067.75" x2="2367.75" y1="110.25" y2="110.25"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="285" x="2075.25" y="133.3784">// FullLifecycleObserver 的 default 版本</text><line style="stroke:#A80036;stroke-width:2.25;" x1="2067.75" x2="2367.75" y1="143.0039" y2="143.0039"/><!--MD5=[6ca744ff27bd2e4ec9bd39aa60a6f694]
class LifecycleEventObserver--><rect codeLine="63" fill="#FEFECE" filter="url(#f114hn5a33t9lv)" height="92.7539" id="LifecycleEventObserver" style="stroke:#A80036;stroke-width:2.25;" width="508.5" x="1311" y="359.25"/><ellipse cx="1461.375" cy="383.25" fill="#B4A7E5" rx="16.5" ry="16.5" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1462.875,378.75 L1462.875,387.75 L1465.875,387.75 L1466.6016,387.75 L1467.375,388.6875 L1467.375,389.25 L1467.375,389.8125 L1466.6016,390.75 L1465.875,390.75 L1456.875,390.75 L1456.1484,390.75 L1455.375,389.8125 L1455.375,389.25 L1455.375,388.6875 L1456.1484,387.75 L1456.875,387.75 L1459.875,387.75 L1459.875,378.75 L1456.875,378.75 L1456.1484,378.75 L1455.375,377.8125 L1455.375,377.25 L1455.375,376.6875 L1456.1484,375.75 L1456.875,375.75 L1465.875,375.75 L1466.6016,375.75 L1467.375,376.6875 L1467.375,377.25 L1467.375,377.8125 L1466.6016,378.75 L1465.875,378.75 L1462.875,378.75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="18" font-style="italic" lengthAdjust="spacing" textLength="195" x="1492.125" y="390.6152">LifecycleEventObserver</text><line style="stroke:#A80036;stroke-width:2.25;" x1="1312.5" x2="1818" y1="407.25" y2="407.25"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1312.5" x2="1818" y1="419.25" y2="419.25"/><ellipse cx="1327.5" cy="435.75" fill="#84BE84" rx="4.5" ry="4.5" style="stroke:#038048;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="469.5" x="1341" y="442.3784">onStateChanged(LifecycleOwner source, Lifecycle.Event event)</text><!--MD5=[2d12fafcb651595769c1a735c88e2de3]
reverse link Lifecycle to Event--><path codeLine="26" d="M1026.75,199.539 C1026.75,230.223 1026.75,264.894 1026.75,296.865 " fill="none" id="Lifecycle-backto-Event" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="1026.75" cy="188.9625" fill="#FFFFFF" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1026.75" x2="1026.75" y1="200.9625" y2="176.9625"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1014.75" x2="1038.75" y1="188.9625" y2="188.9625"/><!--MD5=[6032164fa206f7fd653ebd23fdcd5348]
reverse link Lifecycle to State--><path codeLine="27" d="M1077.9735,196.8 C1100.529,234.9105 1126.9695,279.5865 1149.525,317.6985 " fill="none" id="Lifecycle-backto-State" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="1072.345" cy="187.2893" fill="#FFFFFF" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1078.457" x2="1066.233" y1="197.6162" y2="176.9625"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1062.0182" x2="1082.6718" y1="193.4013" y2="181.1773"/><!--MD5=[4fe6400979b82e8b668c7e60862d75c8]
reverse link LifecycleRegistry to ObserverWithState--><path codeLine="44" d="M771.75,485.6025 C771.75,524.865 771.75,571.0062 771.75,604.3109 " fill="none" id="LifecycleRegistry-backto-ObserverWithState" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="771.75" cy="474.8265" fill="#FFFFFF" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="771.75" x2="771.75" y1="486.8265" y2="462.8265"/><line style="stroke:#A80036;stroke-width:1.5;" x1="759.75" x2="783.75" y1="474.8265" y2="474.8265"/><!--MD5=[c0dea056a19f3d9daa2940e27b791253]
reverse link Lifecycle to LifecycleRegistry--><path codeLine="46" d="M949.0275,199.8585 C906.969,248.3505 856.3365,306.726 819.9705,348.654 " fill="none" id="Lifecycle-backto-LifecycleRegistry" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="none" points="941.298,192.747,968.886,176.9625,957.162,206.5065,941.298,192.747" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[e21f1a8b3de48f5a066dc8f3d7731e55]
reverse link LifecycleObserver to FullLifecycleObserver--><path codeLine="67" d="M1693.77,108.75 C1701.33,108.75 1708.89,108.75 1716.435,108.75 " fill="none" id="LifecycleObserver-backto-FullLifecycleObserver" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="none" points="1693.695,119.25,1663.695,108.75,1693.68,98.25,1693.695,119.25" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[baa6ea43aa717ea77a1cb57467c0adc2]
reverse link FullLifecycleObserver to DefaultLifecycleObserver--><path codeLine="68" d="M2044.11,108.75 C2051.445,108.75 2058.765,108.75 2066.1,108.75 " fill="none" id="FullLifecycleObserver-backto-DefaultLifecycleObserver" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="none" points="2043.96,119.25,2013.96,108.75,2043.96,98.25,2043.96,119.25" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[52181f82ff6dc4a947056dc42b46d659]
reverse link LifecycleObserver to LifecycleEventObserver--><path codeLine="69" d="M1565.25,175.2225 C1565.25,230.907 1565.25,309.6885 1565.25,358.8315 " fill="none" id="LifecycleObserver-backto-LifecycleEventObserver" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="none" points="1554.75,175.1295,1565.25,145.1295,1575.75,175.1295,1554.75,175.1295" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[fce3158d9b5ad0dca5c53d97ad616e50]
@startuml


abstract class Lifecycle {
    + abstract addObserver(LifecycleObserver observer)
    + abstract removeObserver(LifecycleObserver observer)
    + abstract getCurrentState(): State
}

enum Event {
        ON_CREATE,
        ON_START,
        ON_RESUME,
        ON_PAUSE,
        ON_STOP,
        ON_DESTROY,
        ON_ANY;
}
enum State {
        DESTROYED,
        INITIALIZED,
        CREATED,
        STARTED,
        RESUMED;
}

Lifecycle +- - Event
Lifecycle +- - State

interface LifecycleOwner {
    getLifecycle(): Lifecycle
}
note left: 我们的 Activity/Fragment 都实现了该接口，\n用以声明它是一个能够提供生命周期事件的宿主。\n同时必须复写getLifecycle()方法提供一个Lifecycle对象

class LifecycleRegistry {
    + markState(@NonNull State state)
    - moveToState(State next)
}
note left: Lifecycle 的唯一实现类，\n主要用来负责注册 Observer，\n以及分发宿主状态事件给它们

class ObserverWithState {
    ~ dispatchEvent(LifecycleOwner owner, Event event)
}

LifecycleRegistry +- - ObserverWithState

Lifecycle <|- - LifecycleRegistry

interface LifecycleObserver {}

interface FullLifecycleObserver {
   + onCreate(LifecycleOwner owner)
   + onStart(LifecycleOwner owner)
   + onResume(LifecycleOwner owner)
   + onPause(LifecycleOwner owner)
   + onStop(LifecycleOwner owner)
   + onDestroy(LifecycleOwner owner)
}

interface DefaultLifecycleObserver {
    // FullLifecycleObserver 的 default 版本
}

interface LifecycleEventObserver {
    + onStateChanged(LifecycleOwner source, Lifecycle.Event event)
}

LifecycleObserver <|- FullLifecycleObserver
FullLifecycleObserver <|- DefaultLifecycleObserver
LifecycleObserver <|- - LifecycleEventObserver

@enduml

PlantUML version 1.2021.7(Sun May 23 20:40:07 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>
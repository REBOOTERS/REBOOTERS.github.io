<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1551px" preserveAspectRatio="none" style="width:1266px;height:1551px;background:#FFFFFF;" version="1.1" viewBox="0 0 1266 1551" width="1266px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g73dbbnm5slz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="3.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="6.0" dy="6.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="828" cy="30" fill="#000000" filter="url(#f1g73dbbnm5slz)" rx="15" ry="15" style="stroke:none;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="369" x="643.5" y="75"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="339" x="658.5" y="108.6855">service = Retrofit.create(ApiService.class)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="169.5" x="743.25" y="157.6406"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="139.5" x="758.25" y="191.3262">service.getData()</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="325.5" x="665.25" y="240.2813"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="295.5" x="680.25" y="273.9668">loadServiceMethod(Method method)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="400.5" x="627.75" y="322.9219"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="370.5" x="642.75" y="356.6074">val result = serviceMethodCache.get(method)</text><polygon fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" points="782.25,405.5625,873.75,405.5625,891.75,423.5625,873.75,441.5625,782.25,441.5625,764.25,423.5625,782.25,405.5625" style="stroke:#A80036;stroke-width:2.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="91.5" x="782.25" y="430.314">result == null</text><text fill="#000000" font-family="sans-serif" font-size="16.5" lengthAdjust="spacing" textLength="27" x="737.25" y="419.937">yes</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="660" x="265.5" y="456.5625"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="630" x="280.5" y="490.248">result = ServiceMethod&lt;T&gt; parseAnnotations(Retrofit retrofit, Method method)</text><path d="M15,545.7598 L15,585.2871 A0,0 0 0 0 15,585.2871 L273,585.2871 A0,0 0 0 0 273,585.2871 L273,572.7598 L303,565.5234 L273,560.7598 L273,560.7598 L258,545.7598 L15,545.7598 A0,0 0 0 0 15,545.7598 " fill="#FBFB77" filter="url(#f1g73dbbnm5slz)" style="stroke:#A80036;stroke-width:1.5;"/><path d="M258,545.7598 L258,560.7598 L273,560.7598 L258,545.7598 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="19.5" lengthAdjust="spacing" textLength="226.5" x="24" y="573.5024">根据注解信息创建 request</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="585" x="303" y="539.2031"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="555" x="318" y="572.8887">requestFactory = RequestFactory.parseAnnotations(retrofit, method)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="598.5" x="296.25" y="621.8438"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="568.5" x="311.25" y="655.5293">HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="645" x="273" y="704.4844"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="615" x="288" y="738.1699">callAdapter = createCallAdapter(retrofit, method, adapterType, annotations);</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="741" x="225" y="787.125"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="711" x="240" y="820.8105">return new CallAdapted&lt;&gt;(requestFactory, callFactory, responseConverter, callAdapter)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="129" x="996" y="456.5625"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="99" x="1011" y="490.248">return result</text><polygon fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" points="828,848.7656,846,866.7656,828,884.7656,810,866.7656,828,848.7656" style="stroke:#A80036;stroke-width:2.25;"/><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="183" x="736.5" y="914.7656"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="153" x="751.5" y="948.4512">result.invoke(args)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="252" x="702" y="997.4063"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="222" x="717" y="1031.0918">HttpServiceMethod.invoke()</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="826.5" x="414.75" y="1080.0469"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="796.5" x="429.75" y="1113.7324">Call&lt;ResponseT&gt; call = new OkHttpCall&lt;&gt;(requestFactory, args, callFactory, responseConverter)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="76.5" x="789.75" y="1162.6875"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="46.5" x="804.75" y="1196.373">adapt</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="213" x="721.5" y="1245.3281"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="183" x="736.5" y="1279.0137">callAdapter.adapt(call)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="334.5" x="660.75" y="1327.9688"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="304.5" x="675.75" y="1361.6543">DefaultCallAdapterFactory.adapt(call)</text><rect fill="#FEFECE" filter="url(#f1g73dbbnm5slz)" height="52.6406" rx="18.75" ry="18.75" style="stroke:#A80036;stroke-width:2.25;" width="111" x="772.5" y="1410.6094"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="81" x="787.5" y="1444.2949">return call</text><ellipse cx="828" cy="1509.75" fill="#FFFFFF" filter="url(#f1g73dbbnm5slz)" rx="16.5" ry="16.5" style="stroke:#000000;stroke-width:1.5;"/><ellipse cx="828" cy="1509.75" fill="#000000" rx="9" ry="9" style="stroke:#7F7F7F;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="45" y2="75"/><polygon fill="#A80036" points="822,60,828,75,834,60,828,66" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="127.6406" y2="157.6406"/><polygon fill="#A80036" points="822,142.6406,828,157.6406,834,142.6406,828,148.6406" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="210.2813" y2="240.2813"/><polygon fill="#A80036" points="822,225.2813,828,240.2813,834,225.2813,828,231.2813" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="292.9219" y2="322.9219"/><polygon fill="#A80036" points="822,307.9219,828,322.9219,834,307.9219,828,313.9219" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="509.2031" y2="539.2031"/><polygon fill="#A80036" points="589.5,524.2031,595.5,539.2031,601.5,524.2031,595.5,530.2031" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="591.8438" y2="621.8438"/><polygon fill="#A80036" points="589.5,606.8438,595.5,621.8438,601.5,606.8438,595.5,612.8438" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="674.4844" y2="704.4844"/><polygon fill="#A80036" points="589.5,689.4844,595.5,704.4844,601.5,689.4844,595.5,695.4844" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="757.125" y2="787.125"/><polygon fill="#A80036" points="589.5,772.125,595.5,787.125,601.5,772.125,595.5,778.125" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="764.25" x2="595.5" y1="423.5625" y2="423.5625"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="423.5625" y2="456.5625"/><polygon fill="#A80036" points="589.5,441.5625,595.5,456.5625,601.5,441.5625,595.5,447.5625" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="891.75" x2="1060.5" y1="423.5625" y2="423.5625"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1060.5" x2="1060.5" y1="423.5625" y2="456.5625"/><polygon fill="#A80036" points="1054.5,441.5625,1060.5,456.5625,1066.5,441.5625,1060.5,447.5625" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="595.5" y1="839.7656" y2="866.7656"/><line style="stroke:#A80036;stroke-width:2.25;" x1="595.5" x2="810" y1="866.7656" y2="866.7656"/><polygon fill="#A80036" points="795,860.7656,810,866.7656,795,872.7656,801,866.7656" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1060.5" x2="1060.5" y1="509.2031" y2="866.7656"/><line style="stroke:#A80036;stroke-width:2.25;" x1="1060.5" x2="846" y1="866.7656" y2="866.7656"/><polygon fill="#A80036" points="861,860.7656,846,866.7656,861,872.7656,855,866.7656" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="375.5625" y2="405.5625"/><polygon fill="#A80036" points="822,390.5625,828,405.5625,834,390.5625,828,396.5625" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="884.7656" y2="914.7656"/><polygon fill="#A80036" points="822,899.7656,828,914.7656,834,899.7656,828,905.7656" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="967.4063" y2="997.4063"/><polygon fill="#A80036" points="822,982.4063,828,997.4063,834,982.4063,828,988.4063" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1050.0469" y2="1080.0469"/><polygon fill="#A80036" points="822,1065.0469,828,1080.0469,834,1065.0469,828,1071.0469" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1132.6875" y2="1162.6875"/><polygon fill="#A80036" points="822,1147.6875,828,1162.6875,834,1147.6875,828,1153.6875" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1215.3281" y2="1245.3281"/><polygon fill="#A80036" points="822,1230.3281,828,1245.3281,834,1230.3281,828,1236.3281" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1297.9688" y2="1327.9688"/><polygon fill="#A80036" points="822,1312.9688,828,1327.9688,834,1312.9688,828,1318.9688" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1380.6094" y2="1410.6094"/><polygon fill="#A80036" points="822,1395.6094,828,1410.6094,834,1395.6094,828,1401.6094" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:2.25;" x1="828" x2="828" y1="1463.25" y2="1493.25"/><polygon fill="#A80036" points="822,1478.25,828,1493.25,834,1478.25,828,1484.25" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[9313a505fbeb4e3d5af0e68c88a076fa]
@startuml
'https://plantuml.com/activity-diagram-beta

start
:service = Retrofit.create(ApiService.class);
:service.getData();
:loadServiceMethod(Method method);
:val result = serviceMethodCache.get(method);
if (result == null) then (yes)
    :result = ServiceMethod<T> parseAnnotations(Retrofit retrofit, Method method);
    :requestFactory = RequestFactory.parseAnnotations(retrofit, method);
    note left: 根据注解信息创建 request
    :HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);
    :callAdapter = createCallAdapter(retrofit, method, adapterType, annotations);;
    :return new CallAdapted<>(requestFactory, callFactory, responseConverter, callAdapter);
else
    :return result;
endif
:result.invoke(args);
:HttpServiceMethod.invoke();
:Call<ResponseT> call = new OkHttpCall<>(requestFactory, args, callFactory, responseConverter);
:adapt;
:callAdapter.adapt(call);
:DefaultCallAdapterFactory.adapt(call);
:return call;
stop

@enduml

@startuml

start
:service = Retrofit.create(ApiService.class);
:service.getData();
:loadServiceMethod(Method method);
:val result = serviceMethodCache.get(method);
if (result == null) then (yes)
    :result = ServiceMethod<T> parseAnnotations(Retrofit retrofit, Method method);
    :requestFactory = RequestFactory.parseAnnotations(retrofit, method);
    note left: 根据注解信息创建 request
    :HttpServiceMethod.parseAnnotations(retrofit, method, requestFactory);
    :callAdapter = createCallAdapter(retrofit, method, adapterType, annotations);;
    :return new CallAdapted<>(requestFactory, callFactory, responseConverter, callAdapter);
else
    :return result;
endif
:result.invoke(args);
:HttpServiceMethod.invoke();
:Call<ResponseT> call = new OkHttpCall<>(requestFactory, args, callFactory, responseConverter);
:adapt;
:callAdapter.adapt(call);
:DefaultCallAdapterFactory.adapt(call);
:return call;
stop

@enduml

PlantUML version 1.2021.7(Sun May 23 20:40:07 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>